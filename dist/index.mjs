var Yn=Object.create;var Yr=Object.defineProperty;var Bn=Object.getOwnPropertyDescriptor;var Ln=Object.getOwnPropertyNames;var Vn=Object.getPrototypeOf,xn=Object.prototype.hasOwnProperty;var ye=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(d,i)=>(typeof require<"u"?require:d)[i]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var zn=(h,d)=>()=>(d||h((d={exports:{}}).exports,d),d.exports);var Gn=(h,d,i,T)=>{if(d&&typeof d=="object"||typeof d=="function")for(let S of Ln(d))!xn.call(h,S)&&S!==i&&Yr(h,S,{get:()=>d[S],enumerable:!(T=Bn(d,S))||T.enumerable});return h};var Nn=(h,d,i)=>(i=h!=null?Yn(Vn(h)):{},Gn(d||!h||!h.__esModule?Yr(i,"default",{value:h,enumerable:!0}):i,h));var Br=zn((Ue,cr)=>{var Me=void 0,fr=function(){var h=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(h=h||__filename),function(d){d=d||{};var i=typeof d<"u"?d:{},T,S;i.ready=new Promise(function(r,e){T=r,S=e});var x={},B;for(B in i)i.hasOwnProperty(B)&&(x[B]=i[B]);var Be=[],Le="./this.program",lr=function(r,e){throw e},dr=typeof window=="object",ie=typeof importScripts=="function",Vr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",D="";function xr(r){return i.locateFile?i.locateFile(r,D):D+r}var Ve,ge,me,zr;function Gr(r){if(!(r instanceof kr)){var e=r;z("exiting due to exception: "+e)}}var Z,Q;Vr?(ie?D=ye("path").dirname(D)+"/":D=__dirname+"/",Ve=function(e,t){return Z||(Z=ye("fs")),Q||(Q=ye("path")),e=Q.normalize(e),Z.readFileSync(e,t?null:"utf8")},me=function(e){var t=Ve(e,!0);return t.buffer||(t=new Uint8Array(t)),vr(t.buffer),t},ge=function(e,t,n){Z||(Z=ye("fs")),Q||(Q=ye("path")),e=Q.normalize(e),Z.readFile(e,function(a,u){a?n(a):t(u.buffer)})},process.argv.length>1&&(Le=process.argv[1].replace(/\\/g,"/")),Be=process.argv.slice(2),process.on("uncaughtException",function(r){if(!(r instanceof kr))throw r}),process.on("unhandledRejection",function(r){throw r}),lr=function(r,e){if(ft())throw process.exitCode=r,e;Gr(e),process.exit(r)},i.inspect=function(){return"[Emscripten Module object]"}):(dr||ie)&&(ie?D=self.location.href:typeof document<"u"&&document.currentScript&&(D=document.currentScript.src),h&&(D=h),D.indexOf("blob:")!==0?D=D.substr(0,D.replace(/[?#].*/,"").lastIndexOf("/")+1):D="",Ve=function(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},ie&&(me=function(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),ge=function(r,e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status==200||n.status==0&&n.response){e(n.response);return}t()},n.onerror=t,n.send(null)},zr=function(r){document.title=r});var Nr=i.print||console.log.bind(console),z=i.printErr||console.warn.bind(console);for(B in x)x.hasOwnProperty(B)&&(i[B]=x[B]);x=null,i.arguments&&(Be=i.arguments),i.thisProgram&&(Le=i.thisProgram),i.quit&&(lr=i.quit);var ae;i.wasmBinary&&(ae=i.wasmBinary);var qr=i.noExitRuntime||!0;typeof WebAssembly!="object"&&fe("no native wasm support detected");var he,pr=!1,Xr;function vr(r,e){r||fe("Assertion failed: "+e)}var yr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function gr(r,e,t){for(var n=e+t,a=e;r[a]&&!(a>=n);)++a;if(a-e>16&&r.subarray&&yr)return yr.decode(r.subarray(e,a));for(var u="";e<a;){var s=r[e++];if(!(s&128)){u+=String.fromCharCode(s);continue}var o=r[e++]&63;if((s&224)==192){u+=String.fromCharCode((s&31)<<6|o);continue}var f=r[e++]&63;if((s&240)==224?s=(s&15)<<12|o<<6|f:s=(s&7)<<18|o<<12|f<<6|r[e++]&63,s<65536)u+=String.fromCharCode(s);else{var l=s-65536;u+=String.fromCharCode(55296|l>>10,56320|l&1023)}}return u}function _e(r,e){return r?gr(E,r,e):""}function xe(r,e,t,n){if(!(n>0))return 0;for(var a=t,u=t+n-1,s=0;s<r.length;++s){var o=r.charCodeAt(s);if(o>=55296&&o<=57343){var f=r.charCodeAt(++s);o=65536+((o&1023)<<10)|f&1023}if(o<=127){if(t>=u)break;e[t++]=o}else if(o<=2047){if(t+1>=u)break;e[t++]=192|o>>6,e[t++]=128|o&63}else if(o<=65535){if(t+2>=u)break;e[t++]=224|o>>12,e[t++]=128|o>>6&63,e[t++]=128|o&63}else{if(t+3>=u)break;e[t++]=240|o>>18,e[t++]=128|o>>12&63,e[t++]=128|o>>6&63,e[t++]=128|o&63}}return e[t]=0,t-a}function Jr(r,e,t){return xe(r,E,e,t)}function ze(r){for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|r.charCodeAt(++t)&1023),n<=127?++e:n<=2047?e+=2:n<=65535?e+=3:e+=4}return e}var mr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Kr(r,e){for(var t=r,n=t>>1,a=n+e/2;!(n>=a)&&oe[n];)++n;if(t=n<<1,t-r>32&&mr)return mr.decode(E.subarray(r,t));for(var u="",s=0;!(s>=e/2);++s){var o=G[r+s*2>>1];if(o==0)break;u+=String.fromCharCode(o)}return u}function Zr(r,e,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=e,a=t<r.length*2?t/2:r.length,u=0;u<a;++u){var s=r.charCodeAt(u);G[e>>1]=s,e+=2}return G[e>>1]=0,e-n}function Qr(r){return r.length*2}function et(r,e){for(var t=0,n="";!(t>=e/4);){var a=m[r+t*4>>2];if(a==0)break;if(++t,a>=65536){var u=a-65536;n+=String.fromCharCode(55296|u>>10,56320|u&1023)}else n+=String.fromCharCode(a)}return n}function rt(r,e,t){if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=e,a=n+t-4,u=0;u<r.length;++u){var s=r.charCodeAt(u);if(s>=55296&&s<=57343){var o=r.charCodeAt(++u);s=65536+((s&1023)<<10)|o&1023}if(m[e>>2]=s,e+=4,e+4>a)break}return m[e>>2]=0,e-n}function tt(r){for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n>=55296&&n<=57343&&++t,e+=4}return e}function nt(r){var e=ze(r)+1,t=Oe(e);return t&&xe(r,L,t,e),t}function it(r,e){L.set(r,e)}function at(r,e,t){for(var n=0;n<r.length;++n)L[e++>>0]=r.charCodeAt(n);t||(L[e>>0]=0)}function ot(r,e){return r%e>0&&(r+=e-r%e),r}var Ge,L,E,G,oe,m,M,hr,_r;function wr(r){Ge=r,i.HEAP8=L=new Int8Array(r),i.HEAP16=G=new Int16Array(r),i.HEAP32=m=new Int32Array(r),i.HEAPU8=E=new Uint8Array(r),i.HEAPU16=oe=new Uint16Array(r),i.HEAPU32=M=new Uint32Array(r),i.HEAPF32=hr=new Float32Array(r),i.HEAPF64=_r=new Float64Array(r)}var Qn=i.INITIAL_MEMORY||33554432,ue,br=[],Cr=[],Tr=[],ut=!1,st=0;function ft(){return qr||st>0}function ct(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)pt(i.preRun.shift());qe(br)}function lt(){ut=!0,qe(Cr)}function dt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Pr(i.postRun.shift());qe(Tr)}function pt(r){br.unshift(r)}function vt(r){Cr.unshift(r)}function Pr(r){Tr.unshift(r)}var N=0,Ne=null,se=null;function yt(r){N++,i.monitorRunDependencies&&i.monitorRunDependencies(N)}function gt(r){if(N--,i.monitorRunDependencies&&i.monitorRunDependencies(N),N==0&&(Ne!==null&&(clearInterval(Ne),Ne=null),se)){var e=se;se=null,e()}}i.preloadedImages={},i.preloadedAudios={};function fe(r){i.onAbort&&i.onAbort(r),r="Aborted("+r+")",z(r),pr=!0,Xr=1,r+=". Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(r);throw S(e),e}var mt="data:application/octet-stream;base64,";function Sr(r){return r.startsWith(mt)}function Ar(r){return r.startsWith("file://")}var I;I="MediaInfoWasm.wasm",Sr(I)||(I=xr(I));function Fr(r){try{if(r==I&&ae)return new Uint8Array(ae);if(me)return me(r);throw"both async and sync fetching of the wasm failed"}catch(e){fe(e)}}function ht(){if(!ae&&(dr||ie)){if(typeof Me=="function"&&!Ar(I))return Me(I,{credentials:"same-origin"}).then(function(r){if(!r.ok)throw"failed to load wasm binary file at '"+I+"'";return r.arrayBuffer()}).catch(function(){return Fr(I)});if(ge)return new Promise(function(r,e){ge(I,function(t){r(new Uint8Array(t))},e)})}return Promise.resolve().then(function(){return Fr(I)})}function _t(){var r={a:On};function e(s,o){var f=s.exports;i.asm=f,he=i.asm.w,wr(he.buffer),ue=i.asm.z,vt(i.asm.x),gt("wasm-instantiate")}yt("wasm-instantiate");function t(s){e(s.instance)}function n(s){return ht().then(function(o){return WebAssembly.instantiate(o,r)}).then(function(o){return o}).then(s,function(o){z("failed to asynchronously prepare wasm: "+o),fe(o)})}function a(){return!ae&&typeof WebAssembly.instantiateStreaming=="function"&&!Sr(I)&&!Ar(I)&&typeof Me=="function"?Me(I,{credentials:"same-origin"}).then(function(s){var o=WebAssembly.instantiateStreaming(s,r);return o.then(t,function(f){return z("wasm streaming compile failed: "+f),z("falling back to ArrayBuffer instantiation"),n(t)})}):n(t)}if(i.instantiateWasm)try{var u=i.instantiateWasm(r,e);return u}catch(s){return z("Module.instantiateWasm callback failed with error: "+s),!1}return a().catch(S),{}}function qe(r){for(;r.length>0;){var e=r.shift();if(typeof e=="function"){e(i);continue}var t=e.func;typeof t=="number"?e.arg===void 0?ue.get(t)():ue.get(t)(e.arg):t(e.arg===void 0?null:e.arg)}}function wt(r,e,t,n,a){}function we(r){switch(r){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+r)}}function bt(){for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);Ir=r}var Ir=void 0;function F(r){for(var e="",t=r;E[t];)e+=Ir[E[t++]];return e}var ee={},q={},be={},Ct=48,Tt=57;function Xe(r){if(r===void 0)return"_unknown";r=r.replace(/[^a-zA-Z0-9_]/g,"$");var e=r.charCodeAt(0);return e>=Ct&&e<=Tt?"_"+r:r}function Ce(r,e){return r=Xe(r),new Function("body","return function "+r+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(e)}function Je(r,e){var t=Ce(e,function(n){this.name=e,this.message=n;var a=new Error(n).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},t}var re=void 0;function _(r){throw new re(r)}var Dr=void 0;function Te(r){throw new Dr(r)}function X(r,e,t){r.forEach(function(o){be[o]=e});function n(o){var f=t(o);f.length!==r.length&&Te("Mismatched type converter count");for(var l=0;l<r.length;++l)U(r[l],f[l])}var a=new Array(e.length),u=[],s=0;e.forEach(function(o,f){q.hasOwnProperty(o)?a[f]=q[o]:(u.push(o),ee.hasOwnProperty(o)||(ee[o]=[]),ee[o].push(function(){a[f]=q[o],++s,s===u.length&&n(a)}))}),u.length===0&&n(a)}function U(r,e,t){if(t=t||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=e.name;if(r||_('type "'+n+'" must have a positive integer typeid pointer'),q.hasOwnProperty(r)){if(t.ignoreDuplicateRegistrations)return;_("Cannot register type '"+n+"' twice")}if(q[r]=e,delete be[r],ee.hasOwnProperty(r)){var a=ee[r];delete ee[r],a.forEach(function(u){u()})}}function Pt(r,e,t,n,a){var u=we(t);e=F(e),U(r,{name:e,fromWireType:function(s){return!!s},toWireType:function(s,o){return o?n:a},argPackAdvance:8,readValueFromPointer:function(s){var o;if(t===1)o=L;else if(t===2)o=G;else if(t===4)o=m;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(o[s>>u])},destructorFunction:null})}function St(r){if(!(this instanceof V)||!(r instanceof V))return!1;for(var e=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=r.$$.ptrType.registeredClass,a=r.$$.ptr;e.baseClass;)t=e.upcast(t),e=e.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return e===n&&t===a}function At(r){return{count:r.count,deleteScheduled:r.deleteScheduled,preservePointerOnDelete:r.preservePointerOnDelete,ptr:r.ptr,ptrType:r.ptrType,smartPtr:r.smartPtr,smartPtrType:r.smartPtrType}}function Ke(r){function e(t){return t.$$.ptrType.registeredClass.name}_(e(r)+" instance already deleted")}var Ze=!1;function Er(r){}function Ft(r){r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)}function $r(r){r.count.value-=1;var e=r.count.value===0;e&&Ft(r)}function ce(r){return typeof FinalizationGroup>"u"?(ce=function(e){return e},r):(Ze=new FinalizationGroup(function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?$r(n):console.warn("object already deleted: "+n.ptr)}}),ce=function(e){return Ze.register(e,e.$$,e.$$),e},Er=function(e){Ze.unregister(e.$$)},ce(r))}function It(){if(this.$$.ptr||Ke(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=ce(Object.create(Object.getPrototypeOf(this),{$$:{value:At(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r}function Dt(){this.$$.ptr||Ke(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_("Object already scheduled for deletion"),Er(this),$r(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Et(){return!this.$$.ptr}var le=void 0,de=[];function Qe(){for(;de.length;){var r=de.pop();r.$$.deleteScheduled=!1,r.delete()}}function $t(){return this.$$.ptr||Ke(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_("Object already scheduled for deletion"),de.push(this),de.length===1&&le&&le(Qe),this.$$.deleteScheduled=!0,this}function Ot(){V.prototype.isAliasOf=St,V.prototype.clone=It,V.prototype.delete=Dt,V.prototype.isDeleted=Et,V.prototype.deleteLater=$t}function V(){}var Or={};function er(r,e,t){if(r[e].overloadTable===void 0){var n=r[e];r[e]=function(){return r[e].overloadTable.hasOwnProperty(arguments.length)||_("Function '"+t+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+r[e].overloadTable+")!"),r[e].overloadTable[arguments.length].apply(this,arguments)},r[e].overloadTable=[],r[e].overloadTable[n.argCount]=n}}function Rr(r,e,t){i.hasOwnProperty(r)?((t===void 0||i[r].overloadTable!==void 0&&i[r].overloadTable[t]!==void 0)&&_("Cannot register public name '"+r+"' twice"),er(i,r,r),i.hasOwnProperty(t)&&_("Cannot register multiple overloads of a function with the same number of arguments ("+t+")!"),i[r].overloadTable[t]=e):(i[r]=e,t!==void 0&&(i[r].numArguments=t))}function Rt(r,e,t,n,a,u,s,o){this.name=r,this.constructor=e,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=u,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}function rr(r,e,t){for(;e!==t;)e.upcast||_("Expected null or instance of "+t.name+", got an instance of "+e.name),r=e.upcast(r),e=e.baseClass;return r}function Mt(r,e){if(e===null)return this.isReference&&_("null is not a valid "+this.name),0;e.$$||_('Cannot pass "'+te(e)+'" as a '+this.name),e.$$.ptr||_("Cannot pass deleted object as a pointer of type "+this.name);var t=e.$$.ptrType.registeredClass,n=rr(e.$$.ptr,t,this.registeredClass);return n}function Ut(r,e){var t;if(e===null)return this.isReference&&_("null is not a valid "+this.name),this.isSmartPointer?(t=this.rawConstructor(),r!==null&&r.push(this.rawDestructor,t),t):0;e.$$||_('Cannot pass "'+te(e)+'" as a '+this.name),e.$$.ptr||_("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&_("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;if(t=rr(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&_("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?t=e.$$.smartPtr:_("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:t=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)t=e.$$.smartPtr;else{var a=e.clone();t=this.rawShare(t,Wr(function(){a.delete()})),r!==null&&r.push(this.rawDestructor,t)}break;default:_("Unsupporting sharing policy")}return t}function Ht(r,e){if(e===null)return this.isReference&&_("null is not a valid "+this.name),0;e.$$||_('Cannot pass "'+te(e)+'" as a '+this.name),e.$$.ptr||_("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&_("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var t=e.$$.ptrType.registeredClass,n=rr(e.$$.ptr,t,this.registeredClass);return n}function Pe(r){return this.fromWireType(M[r>>2])}function Wt(r){return this.rawGetPointee&&(r=this.rawGetPointee(r)),r}function jt(r){this.rawDestructor&&this.rawDestructor(r)}function kt(r){r!==null&&r.delete()}function Mr(r,e,t){if(e===t)return r;if(t.baseClass===void 0)return null;var n=Mr(r,e,t.baseClass);return n===null?null:t.downcast(n)}function Yt(){return Object.keys(pe).length}function Bt(){var r=[];for(var e in pe)pe.hasOwnProperty(e)&&r.push(pe[e]);return r}function Lt(r){le=r,de.length&&le&&le(Qe)}function Vt(){i.getInheritedInstanceCount=Yt,i.getLiveInheritedInstances=Bt,i.flushPendingDeletes=Qe,i.setDelayFunction=Lt}var pe={};function xt(r,e){for(e===void 0&&_("ptr should not be undefined");r.baseClass;)e=r.upcast(e),r=r.baseClass;return e}function zt(r,e){return e=xt(r,e),pe[e]}function Se(r,e){(!e.ptrType||!e.ptr)&&Te("makeClassHandle requires ptr and ptrType");var t=!!e.smartPtrType,n=!!e.smartPtr;return t!==n&&Te("Both smartPtrType and smartPtr must be specified"),e.count={value:1},ce(Object.create(r,{$$:{value:e}}))}function Gt(r){var e=this.getPointee(r);if(!e)return this.destructor(r),null;var t=zt(this.registeredClass,e);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=e,t.$$.smartPtr=r,t.clone();var n=t.clone();return this.destructor(r),n}function a(){return this.isSmartPointer?Se(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:r}):Se(this.registeredClass.instancePrototype,{ptrType:this,ptr:r})}var u=this.registeredClass.getActualType(e),s=Or[u];if(!s)return a.call(this);var o;this.isConst?o=s.constPointerType:o=s.pointerType;var f=Mr(e,this.registeredClass,o.registeredClass);return f===null?a.call(this):this.isSmartPointer?Se(o.registeredClass.instancePrototype,{ptrType:o,ptr:f,smartPtrType:this,smartPtr:r}):Se(o.registeredClass.instancePrototype,{ptrType:o,ptr:f})}function Nt(){k.prototype.getPointee=Wt,k.prototype.destructor=jt,k.prototype.argPackAdvance=8,k.prototype.readValueFromPointer=Pe,k.prototype.deleteObject=kt,k.prototype.fromWireType=Gt}function k(r,e,t,n,a,u,s,o,f,l,v){this.name=r,this.registeredClass=e,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=u,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=f,this.rawShare=l,this.rawDestructor=v,!a&&e.baseClass===void 0?n?(this.toWireType=Mt,this.destructorFunction=null):(this.toWireType=Ht,this.destructorFunction=null):this.toWireType=Ut}function qt(r,e,t){i.hasOwnProperty(r)||Te("Replacing nonexistant public symbol"),i[r].overloadTable!==void 0&&t!==void 0?i[r].overloadTable[t]=e:(i[r]=e,i[r].argCount=t)}function Xt(r,e,t){var n=i["dynCall_"+r];return t&&t.length?n.apply(null,[e].concat(t)):n.call(null,e)}function Jt(r,e,t){return r.includes("j")?Xt(r,e,t):ue.get(e).apply(null,t)}function Kt(r,e){var t=[];return function(){t.length=arguments.length;for(var n=0;n<arguments.length;n++)t[n]=arguments[n];return Jt(r,e,t)}}function J(r,e){r=F(r);function t(){return r.includes("j")?Kt(r,e):ue.get(e)}var n=t();return typeof n!="function"&&_("unknown function pointer with signature "+r+": "+e),n}var Ur=void 0;function Hr(r){var e=jr(r),t=F(e);return Y(e),t}function Ae(r,e){var t=[],n={};function a(u){if(!n[u]&&!q[u]){if(be[u]){be[u].forEach(a);return}t.push(u),n[u]=!0}}throw e.forEach(a),new Ur(r+": "+t.map(Hr).join([", "]))}function Zt(r,e,t,n,a,u,s,o,f,l,v,g,y){v=F(v),u=J(a,u),o&&(o=J(s,o)),l&&(l=J(f,l)),y=J(g,y);var b=Xe(v);Rr(b,function(){Ae("Cannot construct "+v+" due to unbound types",[n])}),X([r,e,t],n?[n]:[],function(C){C=C[0];var A,$;n?(A=C.registeredClass,$=A.instancePrototype):$=V.prototype;var W=Ce(b,function(){if(Object.getPrototypeOf(this)!==c)throw new re("Use 'new' to construct "+v);if(p.constructor_body===void 0)throw new re(v+" has no accessible constructor");var R=p.constructor_body[arguments.length];if(R===void 0)throw new re("Tried to invoke ctor of "+v+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(p.constructor_body).toString()+") parameters instead!");return R.apply(this,arguments)}),c=Object.create($,{constructor:{value:W}});W.prototype=c;var p=new Rt(v,W,c,y,A,u,o,l),P=new k(v,p,!0,!1,!1),w=new k(v+"*",p,!1,!1,!1),O=new k(v+" const*",p,!1,!0,!1);return Or[r]={pointerType:w,constPointerType:O},qt(b,W),[P,w,O]})}function Qt(r,e){if(!(r instanceof Function))throw new TypeError("new_ called with constructor type "+typeof r+" which is not a function");var t=Ce(r.name||"unknownFunctionName",function(){});t.prototype=r.prototype;var n=new t,a=r.apply(n,e);return a instanceof Object?a:n}function en(r){for(;r.length;){var e=r.pop(),t=r.pop();t(e)}}function tr(r,e,t,n,a){var u=e.length;u<2&&_("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=e[1]!==null&&t!==null,o=!1,f=1;f<e.length;++f)if(e[f]!==null&&e[f].destructorFunction===void 0){o=!0;break}for(var l=e[0].name!=="void",v="",g="",f=0;f<u-2;++f)v+=(f!==0?", ":"")+"arg"+f,g+=(f!==0?", ":"")+"arg"+f+"Wired";var y="return function "+Xe(r)+"("+v+`) {
if (arguments.length !== `+(u-2)+`) {
throwBindingError('function `+r+" called with ' + arguments.length + ' arguments, expected "+(u-2)+` args!');
}
`;o&&(y+=`var destructors = [];
`);var b=o?"destructors":"null",C=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],A=[_,n,a,en,e[0],e[1]];s&&(y+="var thisWired = classParam.toWireType("+b+`, this);
`);for(var f=0;f<u-2;++f)y+="var arg"+f+"Wired = argType"+f+".toWireType("+b+", arg"+f+"); // "+e[f+2].name+`
`,C.push("argType"+f),A.push(e[f+2]);if(s&&(g="thisWired"+(g.length>0?", ":"")+g),y+=(l?"var rv = ":"")+"invoker(fn"+(g.length>0?", ":"")+g+`);
`,o)y+=`runDestructors(destructors);
`;else for(var f=s?1:2;f<e.length;++f){var $=f===1?"thisWired":"arg"+(f-2)+"Wired";e[f].destructorFunction!==null&&(y+=$+"_dtor("+$+"); // "+e[f].name+`
`,C.push($+"_dtor"),A.push(e[f].destructorFunction))}l&&(y+=`var ret = retType.fromWireType(rv);
return ret;
`),y+=`}
`,C.push(y);var W=Qt(Function,C).apply(null,A);return W}function nr(r,e){for(var t=[],n=0;n<r;n++)t.push(m[(e>>2)+n]);return t}function rn(r,e,t,n,a,u,s){var o=nr(t,n);e=F(e),u=J(a,u),X([],[r],function(f){f=f[0];var l=f.name+"."+e;function v(){Ae("Cannot call "+l+" due to unbound types",o)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var g=f.registeredClass.constructor;return g[e]===void 0?(v.argCount=t-1,g[e]=v):(er(g,e,l),g[e].overloadTable[t-1]=v),X([],o,function(y){var b=[y[0],null].concat(y.slice(1)),C=tr(l,b,null,u,s);return g[e].overloadTable===void 0?(C.argCount=t-1,g[e]=C):g[e].overloadTable[t-1]=C,[]}),[]})}function tn(r,e,t,n,a,u){vr(e>0);var s=nr(e,t);a=J(n,a),X([],[r],function(o){o=o[0];var f="constructor "+o.name;if(o.registeredClass.constructor_body===void 0&&(o.registeredClass.constructor_body=[]),o.registeredClass.constructor_body[e-1]!==void 0)throw new re("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+o.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return o.registeredClass.constructor_body[e-1]=function(){Ae("Cannot construct "+o.name+" due to unbound types",s)},X([],s,function(l){return l.splice(1,0,null),o.registeredClass.constructor_body[e-1]=tr(f,l,null,a,u),[]}),[]})}function nn(r,e,t,n,a,u,s,o){var f=nr(t,n);e=F(e),u=J(a,u),X([],[r],function(l){l=l[0];var v=l.name+"."+e;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),o&&l.registeredClass.pureVirtualFunctions.push(e);function g(){Ae("Cannot call "+v+" due to unbound types",f)}var y=l.registeredClass.instancePrototype,b=y[e];return b===void 0||b.overloadTable===void 0&&b.className!==l.name&&b.argCount===t-2?(g.argCount=t-2,g.className=l.name,y[e]=g):(er(y,e,v),y[e].overloadTable[t-2]=g),X([],f,function(C){var A=tr(v,C,l,u,s);return y[e].overloadTable===void 0?(A.argCount=t-2,y[e]=A):y[e].overloadTable[t-2]=A,[]}),[]})}var ir=[],H=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function an(r){r>4&&--H[r].refcount===0&&(H[r]=void 0,ir.push(r))}function on(){for(var r=0,e=5;e<H.length;++e)H[e]!==void 0&&++r;return r}function un(){for(var r=5;r<H.length;++r)if(H[r]!==void 0)return H[r];return null}function sn(){i.count_emval_handles=on,i.get_first_emval=un}function Wr(r){switch(r){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var e=ir.length?ir.pop():H.length;return H[e]={refcount:1,value:r},e}}}function fn(r,e){e=F(e),U(r,{name:e,fromWireType:function(t){var n=H[t].value;return an(t),n},toWireType:function(t,n){return Wr(n)},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:null})}function cn(r,e,t){switch(e){case 0:return function(n){var a=t?L:E;return this.fromWireType(a[n])};case 1:return function(n){var a=t?G:oe;return this.fromWireType(a[n>>1])};case 2:return function(n){var a=t?m:M;return this.fromWireType(a[n>>2])};default:throw new TypeError("Unknown integer type: "+r)}}function ln(r,e,t,n){var a=we(t);e=F(e);function u(){}u.values={},U(r,{name:e,constructor:u,fromWireType:function(s){return this.constructor.values[s]},toWireType:function(s,o){return o.value},argPackAdvance:8,readValueFromPointer:cn(e,a,n),destructorFunction:null}),Rr(e,u)}function dn(r,e){var t=q[r];return t===void 0&&_(e+" has unknown type "+Hr(r)),t}function pn(r,e,t){var n=dn(r,"enum");e=F(e);var a=n.constructor,u=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:Ce(n.name+"_"+e,function(){})}});a.values[t]=u,a[e]=u}function te(r){if(r===null)return"null";var e=typeof r;return e==="object"||e==="array"||e==="function"?r.toString():""+r}function vn(r,e){switch(e){case 2:return function(t){return this.fromWireType(hr[t>>2])};case 3:return function(t){return this.fromWireType(_r[t>>3])};default:throw new TypeError("Unknown float type: "+r)}}function yn(r,e,t){var n=we(t);e=F(e),U(r,{name:e,fromWireType:function(a){return a},toWireType:function(a,u){if(typeof u!="number"&&typeof u!="boolean")throw new TypeError('Cannot convert "'+te(u)+'" to '+this.name);return u},argPackAdvance:8,readValueFromPointer:vn(e,n),destructorFunction:null})}function gn(r,e,t){switch(e){case 0:return t?function(a){return L[a]}:function(a){return E[a]};case 1:return t?function(a){return G[a>>1]}:function(a){return oe[a>>1]};case 2:return t?function(a){return m[a>>2]}:function(a){return M[a>>2]};default:throw new TypeError("Unknown integer type: "+r)}}function mn(r,e,t,n,a){e=F(e),a===-1&&(a=4294967295);var u=we(t),s=function(l){return l};if(n===0){var o=32-8*t;s=function(l){return l<<o>>>o}}var f=e.includes("unsigned");U(r,{name:e,fromWireType:s,toWireType:function(l,v){if(typeof v!="number"&&typeof v!="boolean")throw new TypeError('Cannot convert "'+te(v)+'" to '+this.name);if(v<n||v>a)throw new TypeError('Passing a number "'+te(v)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+n+", "+a+"]!");return f?v>>>0:v|0},argPackAdvance:8,readValueFromPointer:gn(e,u,n!==0),destructorFunction:null})}function hn(r,e,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[e];function u(s){s=s>>2;var o=M,f=o[s],l=o[s+1];return new a(Ge,l,f)}t=F(t),U(r,{name:t,fromWireType:u,argPackAdvance:8,readValueFromPointer:u},{ignoreDuplicateRegistrations:!0})}function _n(r,e){e=F(e);var t=e==="std::string";U(r,{name:e,fromWireType:function(n){var a=M[n>>2],u;if(t)for(var s=n+4,o=0;o<=a;++o){var f=n+4+o;if(o==a||E[f]==0){var l=f-s,v=_e(s,l);u===void 0?u=v:(u+="\0",u+=v),s=f+1}}else{for(var g=new Array(a),o=0;o<a;++o)g[o]=String.fromCharCode(E[n+4+o]);u=g.join("")}return Y(n),u},toWireType:function(n,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var u,s=typeof a=="string";s||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||_("Cannot pass non-string to std::string"),t&&s?u=function(){return ze(a)}:u=function(){return a.length};var o=u(),f=Oe(4+o+1);if(M[f>>2]=o,t&&s)Jr(a,f+4,o+1);else if(s)for(var l=0;l<o;++l){var v=a.charCodeAt(l);v>255&&(Y(f),_("String has UTF-16 code units that do not fit in 8 bits")),E[f+4+l]=v}else for(var l=0;l<o;++l)E[f+4+l]=a[l];return n!==null&&n.push(Y,f),f},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:function(n){Y(n)}})}function wn(r,e,t){t=F(t);var n,a,u,s,o;e===2?(n=Kr,a=Zr,s=Qr,u=function(){return oe},o=1):e===4&&(n=et,a=rt,s=tt,u=function(){return M},o=2),U(r,{name:t,fromWireType:function(f){for(var l=M[f>>2],v=u(),g,y=f+4,b=0;b<=l;++b){var C=f+4+b*e;if(b==l||v[C>>o]==0){var A=C-y,$=n(y,A);g===void 0?g=$:(g+="\0",g+=$),y=C+e}}return Y(f),g},toWireType:function(f,l){typeof l!="string"&&_("Cannot pass non-string to C++ string type "+t);var v=s(l),g=Oe(4+v+e);return M[g>>2]=v>>o,a(l,g+4,v+e),f!==null&&f.push(Y,g),g},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:function(f){Y(f)}})}function bn(r,e){e=F(e),U(r,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}function Cn(){fe("")}function Tn(r){try{return he.grow(r-Ge.byteLength+65535>>>16),wr(he.buffer),1}catch{}}function Pn(r){var e=E.length;r=r>>>0;var t=2147483648;if(r>t)return!1;for(var n=1;n<=4;n*=2){var a=e*(1+.2/n);a=Math.min(a,r+100663296);var u=Math.min(t,ot(Math.max(r,a),65536)),s=Tn(u);if(s)return!0}return!1}var ar={};function Sn(){return Le||"./this.program"}function ve(){if(!ve.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:Sn()};for(var t in ar)ar[t]===void 0?delete e[t]:e[t]=ar[t];var n=[];for(var t in e)n.push(t+"="+e[t]);ve.strings=n}return ve.strings}var or={mappings:{},buffers:[null,[],[]],printChar:function(r,e){var t=or.buffers[r];e===0||e===10?((r===1?Nr:z)(gr(t,0)),t.length=0):t.push(e)},varargs:void 0,get:function(){or.varargs+=4;var r=m[or.varargs-4>>2];return r},getStr:function(r){var e=_e(r);return e},get64:function(r,e){return r}};function An(r,e){var t=0;return ve().forEach(function(n,a){var u=e+t;m[r+a*4>>2]=u,at(n,u),t+=n.length+1}),0}function Fn(r,e){var t=ve();m[r>>2]=t.length;var n=0;return t.forEach(function(a){n+=a.length+1}),m[e>>2]=n,0}function Fe(r,e){var t=new Date(m[r>>2]*1e3);m[e>>2]=t.getUTCSeconds(),m[e+4>>2]=t.getUTCMinutes(),m[e+8>>2]=t.getUTCHours(),m[e+12>>2]=t.getUTCDate(),m[e+16>>2]=t.getUTCMonth(),m[e+20>>2]=t.getUTCFullYear()-1900,m[e+24>>2]=t.getUTCDay(),m[e+36>>2]=0,m[e+32>>2]=0;var n=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0),a=(t.getTime()-n)/(1e3*60*60*24)|0;return m[e+28>>2]=a,Fe.GMTString||(Fe.GMTString=nt("GMT")),m[e+40>>2]=Fe.GMTString,e}function Ie(r){return r%4===0&&(r%100!==0||r%400===0)}function ur(r,e){for(var t=0,n=0;n<=e;t+=r[n++]);return t}var De=[31,29,31,30,31,30,31,31,30,31,30,31],Ee=[31,28,31,30,31,30,31,31,30,31,30,31];function $e(r,e){for(var t=new Date(r.getTime());e>0;){var n=Ie(t.getFullYear()),a=t.getMonth(),u=(n?De:Ee)[a];if(e>u-t.getDate())e-=u-t.getDate()+1,t.setDate(1),a<11?t.setMonth(a+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1));else return t.setDate(t.getDate()+e),t}return t}function In(r,e,t,n){var a=m[n+40>>2],u={tm_sec:m[n>>2],tm_min:m[n+4>>2],tm_hour:m[n+8>>2],tm_mday:m[n+12>>2],tm_mon:m[n+16>>2],tm_year:m[n+20>>2],tm_wday:m[n+24>>2],tm_yday:m[n+28>>2],tm_isdst:m[n+32>>2],tm_gmtoff:m[n+36>>2],tm_zone:a?_e(a):""},s=_e(t),o={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in o)s=s.replace(new RegExp(f,"g"),o[f]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"];function g(c,p,P){for(var w=typeof c=="number"?c.toString():c||"";w.length<p;)w=P[0]+w;return w}function y(c,p){return g(c,p,"0")}function b(c,p){function P(O){return O<0?-1:O>0?1:0}var w;return(w=P(c.getFullYear()-p.getFullYear()))===0&&(w=P(c.getMonth()-p.getMonth()))===0&&(w=P(c.getDate()-p.getDate())),w}function C(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function A(c){var p=$e(new Date(c.tm_year+1900,0,1),c.tm_yday),P=new Date(p.getFullYear(),0,4),w=new Date(p.getFullYear()+1,0,4),O=C(P),R=C(w);return b(O,p)<=0?b(R,p)<=0?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var $={"%a":function(c){return l[c.tm_wday].substring(0,3)},"%A":function(c){return l[c.tm_wday]},"%b":function(c){return v[c.tm_mon].substring(0,3)},"%B":function(c){return v[c.tm_mon]},"%C":function(c){var p=c.tm_year+1900;return y(p/100|0,2)},"%d":function(c){return y(c.tm_mday,2)},"%e":function(c){return g(c.tm_mday,2," ")},"%g":function(c){return A(c).toString().substring(2)},"%G":function(c){return A(c)},"%H":function(c){return y(c.tm_hour,2)},"%I":function(c){var p=c.tm_hour;return p==0?p=12:p>12&&(p-=12),y(p,2)},"%j":function(c){return y(c.tm_mday+ur(Ie(c.tm_year+1900)?De:Ee,c.tm_mon-1),3)},"%m":function(c){return y(c.tm_mon+1,2)},"%M":function(c){return y(c.tm_min,2)},"%n":function(){return`
`},"%p":function(c){return c.tm_hour>=0&&c.tm_hour<12?"AM":"PM"},"%S":function(c){return y(c.tm_sec,2)},"%t":function(){return"	"},"%u":function(c){return c.tm_wday||7},"%U":function(c){var p=new Date(c.tm_year+1900,0,1),P=p.getDay()===0?p:$e(p,7-p.getDay()),w=new Date(c.tm_year+1900,c.tm_mon,c.tm_mday);if(b(P,w)<0){var O=ur(Ie(w.getFullYear())?De:Ee,w.getMonth()-1)-31,R=31-P.getDate(),K=R+O+w.getDate();return y(Math.ceil(K/7),2)}return b(P,p)===0?"01":"00"},"%V":function(c){var p=new Date(c.tm_year+1900,0,4),P=new Date(c.tm_year+1901,0,4),w=C(p),O=C(P),R=$e(new Date(c.tm_year+1900,0,1),c.tm_yday);if(b(R,w)<0)return"53";if(b(O,R)<=0)return"01";var K;return w.getFullYear()<c.tm_year+1900?K=c.tm_yday+32-w.getDate():K=c.tm_yday+1-w.getDate(),y(Math.ceil(K/7),2)},"%w":function(c){return c.tm_wday},"%W":function(c){var p=new Date(c.tm_year,0,1),P=p.getDay()===1?p:$e(p,p.getDay()===0?1:7-p.getDay()+1),w=new Date(c.tm_year+1900,c.tm_mon,c.tm_mday);if(b(P,w)<0){var O=ur(Ie(w.getFullYear())?De:Ee,w.getMonth()-1)-31,R=31-P.getDate(),K=R+O+w.getDate();return y(Math.ceil(K/7),2)}return b(P,p)===0?"01":"00"},"%y":function(c){return(c.tm_year+1900).toString().substring(2)},"%Y":function(c){return c.tm_year+1900},"%z":function(c){var p=c.tm_gmtoff,P=p>=0;return p=Math.abs(p)/60,p=p/60*100+p%60,(P?"+":"-")+("0000"+p).slice(-4)},"%Z":function(c){return c.tm_zone},"%%":function(){return"%"}};for(var f in $)s.includes(f)&&(s=s.replace(new RegExp(f,"g"),$[f](u)));var W=$n(s,!1);return W.length>e?0:(it(W,r),W.length-1)}function Dn(r,e,t,n){return In(r,e,t,n)}function En(r){var e=Date.now()/1e3|0;return r&&(m[r>>2]=e),e}bt(),re=i.BindingError=Je(Error,"BindingError"),Dr=i.InternalError=Je(Error,"InternalError"),Ot(),Nt(),Vt(),Ur=i.UnboundTypeError=Je(Error,"UnboundTypeError"),sn();function $n(r,e,t){var n=t>0?t:ze(r)+1,a=new Array(n),u=xe(r,a,0,a.length);return e&&(a.length=u),a}var On={o:wt,u:Pt,v:Zt,k:rn,n:tn,a:nn,t:fn,h:ln,g:pn,i:yn,c:mn,b:hn,j:_n,e:wn,l:bn,f:Cn,p:Pn,r:An,s:Fn,m:Fe,q:Dn,d:En},ei=_t(),Rn=i.___wasm_call_ctors=function(){return(Rn=i.___wasm_call_ctors=i.asm.x).apply(null,arguments)},Oe=i._malloc=function(){return(Oe=i._malloc=i.asm.y).apply(null,arguments)},Y=i._free=function(){return(Y=i._free=i.asm.A).apply(null,arguments)},jr=i.___getTypeName=function(){return(jr=i.___getTypeName=i.asm.B).apply(null,arguments)},Mn=i.___embind_register_native_and_builtin_types=function(){return(Mn=i.___embind_register_native_and_builtin_types=i.asm.C).apply(null,arguments)},Un=i.dynCall_iiijj=function(){return(Un=i.dynCall_iiijj=i.asm.D).apply(null,arguments)},Hn=i.dynCall_iiiiij=function(){return(Hn=i.dynCall_iiiiij=i.asm.E).apply(null,arguments)},Wn=i.dynCall_iiiiijj=function(){return(Wn=i.dynCall_iiiiijj=i.asm.F).apply(null,arguments)},jn=i.dynCall_iiiiiijj=function(){return(jn=i.dynCall_iiiiiijj=i.asm.G).apply(null,arguments)},kn=i.dynCall_viijii=function(){return(kn=i.dynCall_viijii=i.asm.H).apply(null,arguments)},Re;function kr(r){this.name="ExitStatus",this.message="Program terminated with exit("+r+")",this.status=r}se=function r(){Re||sr(),Re||(se=r)};function sr(r){if(r=r||Be,N>0||(ct(),N>0))return;function e(){Re||(Re=!0,i.calledRun=!0,!pr&&(lt(),T(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),dt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e()}if(i.run=sr,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return sr(),helpers=function(){d.MediaInfo.prototype.Open=function(r,e){var t=this,n=0,a=1024*1024;if(r.constructor===File){t.Option("File_FileName",r.name),t.Open_Buffer_Init(r.size,0);var u=function(o){var f=new FileReader,l=r.slice(n,n+o);f.onload=s,f.readAsArrayBuffer(l)},s=function(o){if(o.target.error===null){var f=t.Open_Buffer_Continue(o.target.result),l=t.Open_Buffer_Continue_Goto_Get();l===-1?n+=o.target.result.byteLength:(n=l,t.Open_Buffer_Init(r.size,l))}else{typeof e=="function"&&e();return}if(f&8||o.target.result.byteLength<1){t.Open_Buffer_Finalize(),typeof e=="function"&&e();return}u(a)};u(a)}}},typeof d.ready<"u"?d.ready.then(helpers):Pr(helpers),d.ready}}();typeof Ue=="object"&&typeof cr=="object"?cr.exports=fr:typeof define=="function"&&define.amd?define([],function(){return fr}):typeof Ue=="object"&&(Ue.MediaInfoLib=fr)});var Zn=Nn(Br());var ne=class extends Error{constructor(i,T){super(i);this.message=i;this.higherOrderError=T;Object.setPrototypeOf(this,new.target.prototype)}},j=class extends ne{constructor(i,T,S=void 0){super(i,S);this.message=i;this.input=T;this.higherOrderError=S}};import{Readable as qn}from"stream";var He=class{openStream(d){try{let i=qn.from(d);if(i.errored)throw i.errored;return i}catch(i){throw new j("Could not open buffer for read stream",d,i)}}};import{createReadStream as Xn}from"fs";var We=class{openStream(d){try{let i=Xn(d);if(i.errored)throw i.errored;return i}catch(i){throw new j("Could not open read stream to the file",d,i)}}};import Jn from"got";var je=class{openStream(d){try{let i=Jn.stream(d);if(i.errored)throw i.errored;return i}catch(i){throw new j("Could not open read stream from HTTP address",d,i)}}};var ke=class{openStream(d){try{return d}catch(i){throw new j("Could not open read stream to the file",d,i)}}};import{Stream as Kn}from"stream";var Ye=class{static createInputHandler(d){return d instanceof Kn?new ke:Buffer.isBuffer(d)?new He:typeof d=="string"&&d.toLowerCase().startsWith("http")||d instanceof URL?new je:new We}};var Lr=class h{lib;async instantiateLib(){try{this.lib=await Zn({})}catch(d){throw new ne("Failed to instantiate MediaInfoLib",d)}}async getInfo(d){this.lib||await this.instantiateLib();try{return await new Promise((i,T)=>{let S=h.normalizeInput(d);h.getDataStream(S,T).then(x=>this.getMediaInfoData(x)).then(i).catch(T)})}catch(i){throw new ne("Failed to read media data",i)}}static normalizeInput(d){let i;return d instanceof URL?i=d.toString():i=d,i}static async getDataStream(d,i){let S=Ye.createInputHandler(d).openStream(d);return S.on("error",i),S}getMediaInfoData(d){return new Promise(async i=>{let T=new this.lib.MediaInfo;T.Open_Buffer_Init(-1,0),d.on("data",S=>{T.Open_Buffer_Continue(S),T.Open_Buffer_Continue_Goto_Get()}),d.on("end",()=>{T.Open_Buffer_Finalize(),T.Option("Output","JSON"),T.Option("Complete");let S=JSON.parse(T.Inform());T.Close(),T.delete(),i(S)})})}};export{Lr as MediaInfo};
